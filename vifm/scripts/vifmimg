#!/usr/bin/env bash

preview_clear() {
	declare -p -A cmd=([action]="remove" [identifier]="preview") \
		> "$UEBERZUG_FIFO"
}

preview_draw() {
	declare -p -A cmd=([action]="add" [identifier]="preview"
	[x]="$2" [y]="$3" [width]="$4" [height]="$5" [path]="$PWD/$6") \
		> "$UEBERZUG_FIFO"
}

main() {
	case "$1" in
	clear)
		preview_clear "$@" ;;
	draw)
		preview_draw "$@" ;;
	esac
}

main "$@"
